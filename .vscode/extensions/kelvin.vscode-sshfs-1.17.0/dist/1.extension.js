exports.ids=[1],exports.modules={35:function(o,t,r){"use strict";r.r(t),r.d(t,"socks",(function(){return h})),r.d(t,"http",(function(){return x}));var n=r(14),e=r(16),i=r(55),p=r(1),c=r(3),s=function(o,t,r,n){return new(r||(r=Promise))((function(e,i){function p(o){try{s(n.next(o))}catch(o){i(o)}}function c(o){try{s(n.throw(o))}catch(o){i(o)}}function s(o){var t;o.done?e(o.value):(t=o.value,t instanceof r?t:new r((function(o){o(t)}))).then(p,c)}s((n=n.apply(o,t||[])).next())}))};function y(o){if(!o.proxy)throw new Error("Missing field 'config.proxy'");if(!o.proxy.host)throw new Error("Missing field 'config.proxy.host'");if(!o.proxy.port)throw new Error("Missing field 'config.proxy.port'");if(!o.proxy.type)throw new Error("Missing field 'config.proxy.type'")}function h(o){return s(this,void 0,void 0,(function*(){if(p.d(`Creating socks proxy connection for ${o.name}`),y(o),"socks4"!==o.proxy.type&&"socks5"!==o.proxy.type)throw new Error("Expected 'config.proxy.type' to be 'socks4' or 'socks5'");try{const t=yield function(o){return s(this,void 0,void 0,(function*(){return Object(c.b)(t=>n.lookup(o,t)).then(t=>(p.b(`Resolved hostname "${o}" to: ${t}`),t))}))}(o.proxy.host);if(!t)throw new Error(`Couldn't resolve '${o.proxy.host}'`);return p.b(`\tConnecting to ${o.host}:${o.port} over ${o.proxy.type} proxy at ${t}:${o.proxy.port}`),(yield i.SocksClient.createConnection({command:"connect",destination:{host:o.host,port:o.port},proxy:{ipaddress:t,port:o.proxy.port,type:"socks4"===o.proxy.type?4:5}})).socket}catch(o){throw new Error(`Error while connecting to the the proxy: ${o.message}`)}}))}function x(o){return p.d(`Creating http proxy connection for ${o.name}`),y(o),new Promise((t,r)=>{"http"!==o.proxy.type&&r(new Error("Expected config.proxy.type' to be 'http'"));try{p.b(`\tConnecting to ${o.host}:${o.port} over http proxy at ${o.proxy.host}:${o.proxy.port}`);const r=Object(e.request)({port:o.proxy.port,hostname:o.proxy.host,method:"CONNECT",path:`${o.host}:${o.port}`});r.end(),r.on("connect",(o,r)=>{t(r)})}catch(o){r(new Error(`Error while connecting to the the proxy: ${o.message}`))}})}}};
//# sourceMappingURL=1.extension.js.map